package com.payment.gateway.thirdpart.unionpay.acp.demo;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

import com.unionpay.acp.sdk.SDKConfig;

/**
 * 
 * Name:  Payment over Internet - Cross-border<br>
 * Function： 5.1.2　Sending SMS Verification Code<br>
 * Back-end Transaction<br>
 * Version:  5.0<br>
 * Updated:  July 2014<br>
 * Author:  China UnionPay ACP Team<br>
 * Copyright:  China UnionPay<br>
 * Notes: The following sample code is for testing only. Merchants can write their own code based on their needs following technical documentation. The following code is for reference only.<br>
 */
public class Form00_5_1_2 extends DemoBase {

	public static Map<String, String> setFormDate() {

		Map<String, String> contentData = new HashMap<String, String>();

		// Constant value
		contentData.put("version", version);// M
		// Default value: UTF-8
		contentData.put("encoding", encoding);// M
		//The serial number of private key certificate
		contentData.put("certId", "00010000");// M
		// Value: 01 (RSA)
		contentData.put("signMethod", "01");// M
		// Value: 77
		contentData.put("txnType", "77");// M
		// 05 -- launched in a unified way
		contentData.put("txnSubType", "05");// M
		// Product type
		contentData.put("bizType", "000301");// M
		// Access type
		contentData.put("accessType", "1");// M
		// Channel type
		contentData.put("channelType", "07");// M
		// Acquirer Code
		contentData.put("acqInsCode", "00010000");
		// Merchant ID
		contentData.put("merId", "802290049000180");// M
		// Merchant Category
		contentData.put("merCatCode", "5611");// M
		// Merchant Name00-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		contentData.put("merName", "abccdad");// M
		// Merchant Abbreviation
		contentData.put("merAbbr", "abc");// M
		// Merchant order No., which should be consistent with subsequent purchase order No..
		SimpleDateFormat dsf = new SimpleDateFormat("yyyyMMddHHmmss");
		contentData.put("orderId", dsf.format(new Date()));// M
		// Date and time when order is sent, which should be consistent with the date and time when subsequent purchase order is sent.
		contentData.put("txnTime", dsf.format(new Date()));// M
		// Card No.
		contentData.put("accNo", "6258091656742336");// C
		// Card verification information and ID information
		contentData.put("customerInfo", getCustomer(encoding));// C
		// International area code
		//contentData.put("intlAreaCd", "");

		return contentData;
	}

	public static void main(String[] args) {

		/**
		 * <pre>
		 * Parameter initialization 
		 * 1. When it runs as a java main method, configuration file will be loaded every time. 
		 * 2. When it runs as a java web application, code for configuration file initialization can be included in listener.
		 * </pre>
		 */
		SDKConfig.getConfig().loadPropertiesFromSrc();
		
		

		/**
		 * Transaction request url, read from configuration file
		 */
		String requestBackUrl = SDKConfig.getConfig().getBackRequestUrl();
		Map<String, String> resmap = submitDate(setFormDate(), requestBackUrl);

		System.out.println(resmap.toString());
	}

}
